<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:adm="http://github.com/adminfaces"
	template="/WEB-INF/templates/templateLogin.xhtml">

<ui:define name="title">
    <h:outputText value="#{msgs['title.home']}" />
</ui:define>

<ui:define name="description">
    <h:outputText value="#{msgs['title.home.description']}" />
</ui:define>

	<ui:define name="body">
	
		<h:form id="form-linkeddata">
			<p:messages id="messages" showDetail="true" closable="true">
	            <p:autoUpdate/>
	        </p:messages>
	        <div class="card">
					<a style="float: center;" href="#{facesContext.externalContext.requestContextPath}/vocab/transactions/?mode=foaf">
						<h:outputText value="#{msgs['text.home.linkeddata.featues.country.getAllRDF']}"/>
					</a> <br/>
					<a style="float: center;" 
							href="#{facesContext.externalContext.requestContextPath}/vocab/transactions/?emitterEmail=#{loginUserController.currentUser.email}">
						<h:outputText value="#{msgs['text.home.linkeddata.featues.country.getAllRDFEmitter']}"/>
					</a> <br/>
					<a style="float: center;" 
							href="#{facesContext.externalContext.requestContextPath}/vocab/transactions/?receiverEmail=#{loginUserController.currentUser.email}">
						<h:outputText value="#{msgs['text.home.linkeddata.featues.country.getAllRDFReceiver']}"/>
					</a> <br/>
	        </div>
	        
	        <br />
	        
	        <div class="card" id = "executeSPARQL">
	        	    <p:commandButton    style="float: center;"
	        	    					value="#{msgs['text.home.linkeddata.featues.country.executeQuery']}"  icon="pi pi-check" 
                						actionListener="#{linkedDataController.retriedAllCountries}"
                						update="@form"/>
	        </div>
	        
	        <br />
	        
	        <div class="card" id = "selectCountryChoices">
	        	 <p:outputLabel for="countries" value="#{msgs['text.home.linkeddata.featues.select']}"/>	  
					<p:selectOneMenu id="countries"
									value="#{linkedDataController.selelectedCountry}"
									converter="omnifaces.SelectItemsConverter">
								<!-- <p:ajax event="change" process="@this" /> -->
								 <p:ajax listener="#{linkedDataController.onCountryChange}" process="@this" update="selectedCountryInfo"/> 
						<f:selectItems value="#{linkedDataController.availableCountries}"
												var="countrySelected" itemLabel="#{countrySelected.name}"
												itemValue="#{countrySelected}">
						</f:selectItems>
					</p:selectOneMenu>	   	
			</div>
			
			<p:card id = "selectedCountryInfo">
					<p:outputPanel id = "selectedCountryInfoPanel" rendered="#{not empty linkedDataController.retrivedCountry}">
							<div class="p-field">
		                        <p:outputLabel for="retrievedCountryName" value="#{msgs['text.home.linkeddata.featues.country.name']}"/>
								<h:outputText id="retrievedCountryName"  value="#{linkedDataController.retrivedCountry.name}"/>
		                    </div>
		                    <div class="p-field">
		                        <p:outputLabel for="retrievedCountryURI" value="#{msgs['text.home.linkeddata.featues.country.uri']}"/>
								<h:outputText id="retrievedCountryURI"  value="#{linkedDataController.retrivedCountry.uri}"/> <br/>
		                    </div>
							<div class="p-field">
		                        <p:outputLabel for="retrievedCountrycurrencyLabel" value="#{msgs['text.home.linkeddata.featues.country.currencyLabel']}"/>
								<h:outputText id="retrievedCountrycurrencyLabel"  value="#{linkedDataController.retrivedCountry.currencyLabel}"/>
		                    </div>
		                    
		                    <div class="p-field">
		                        <p:outputLabel for="retrievedCountrycurrencySymbol" value="#{msgs['text.home.linkeddata.featues.country.currencySymbol']}"/>
								<h:outputText id="retrievedCountrycurrencySymbol"  value="#{linkedDataController.retrivedCountry.currencySymbol}"/>
		                    </div>
		                    
							<div class="p-field">
		                        <p:outputLabel for="retrievedCountrycurrencyURI" value="#{msgs['text.home.linkeddata.featues.country.currencyURI']}"/>
								<h:outputText id="retrievedCountrycurrencyURI"  value="#{linkedDataController.retrivedCountry.currencyUri}"/>
		                    </div>
					</p:outputPanel>
					
			</p:card>
			
			<p:divider />
			
			<p:commandButton value="#{msgs['text.home.linkeddata.back']}"  icon="pi pi-times" 
                				 action="#{linkedDataController.redirectsHome}"
                                 class="ui-button-secondary"/>	        	
	    </h:form>    

	</ui:define>
	
	<ui:define name="footer">
		<p><h:outputText value="#{msgs['text.home.about02']}" escape="false" /></p>
		<h:outputText value="#{msgs['text.developedBy']}" escape="false" />
		<div class="pull-right hidden-xs" style="color: gray">
			<i>1.0.0</i>
		</div>
</ui:define>
</ui:composition>

